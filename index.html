<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>HighRoller: Fate or Fold</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Josefin+Sans:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0a0a0f;
  --felt: #0d1f14;
  --gold: #c9a84c;
  --gold-light: #f0d080;
  --gold-dim: #7a6230;
  --card-bg: #1a1a2e;
  --text: #e8dfc8;
  --text-dim: #8a7d60;
  --success: #4ade80;
  --danger: #f87171;
  --glow-gold: 0 0 30px rgba(201,168,76,0.5);
  --glow-success: 0 0 30px rgba(74,222,128,0.6);
  --glow-danger: 0 0 30px rgba(248,113,113,0.6);
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Josefin Sans', sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow-x: hidden;
  position: relative;
}

/* Felt table background */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background:
    radial-gradient(ellipse 80% 60% at 50% 50%, #0d2318 0%, #0a0a0f 70%),
    repeating-linear-gradient(
      45deg,
      rgba(255,255,255,0.012) 0px, rgba(255,255,255,0.012) 1px,
      transparent 1px, transparent 10px
    );
  z-index: 0;
}

/* Ambient corner lights */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background:
    radial-gradient(circle at 0% 0%, rgba(201,168,76,0.08) 0%, transparent 50%),
    radial-gradient(circle at 100% 100%, rgba(201,168,76,0.06) 0%, transparent 50%);
  z-index: 0;
  pointer-events: none;
}

/* Floating chips */
.chip {
  position: fixed;
  border-radius: 50%;
  border: 3px solid;
  opacity: 0.08;
  animation: float linear infinite;
  z-index: 0;
  pointer-events: none;
}

@keyframes float {
  0% { transform: translateY(110vh) rotate(0deg); }
  100% { transform: translateY(-110vh) rotate(720deg); }
}

/* === RESPONSIVE WRAPPER === */
.game-wrap {
  position: relative;
  z-index: 1;
  width: 95%; 
  max-width: 420px;
  padding: 1rem;
  margin: 0 auto;
}

/* === HEADER === */
.header {
  text-align: center;
  margin-bottom: 1.5rem;
}

.logo {
  font-family: 'Playfair Display', serif;
  font-size: 2.6rem;
  font-weight: 900;
  letter-spacing: 0.02em;
  background: linear-gradient(135deg, #c9a84c 0%, #f0d080 40%, #c9a84c 70%, #7a6230 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  filter: drop-shadow(0 0 20px rgba(201,168,76,0.4));
}

.tagline {
  font-size: 0.7rem;
  letter-spacing: 0.35em;
  text-transform: uppercase;
  color: var(--gold-dim);
  margin-top: 0.1rem;
}

/* Ornamental divider */
.ornament {
  display: flex;
  align-items: center;
  gap: 0.8rem;
  margin: 0.8rem 0;
}
.ornament::before, .ornament::after {
  content: '';
  flex: 1;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold-dim), transparent);
}
.ornament span {
  color: var(--gold);
  font-size: 0.9rem;
}

/* === MAIN ARENA === */
.arena {
  background: linear-gradient(145deg, #111827 0%, #0d1520 100%);
  border: 1px solid rgba(201,168,76,0.2);
  border-radius: 20px;
  padding: 1.5rem;
  box-shadow:
    0 0 0 1px rgba(201,168,76,0.05),
    0 25px 60px rgba(0,0,0,0.7),
    inset 0 1px 0 rgba(201,168,76,0.1);
  position: relative;
  overflow: hidden;
}

/* === SCORE BAR === */
.score-bar {
  display: flex;
  justify-content: space-between;
  margin-bottom: 1.5rem;
}

.score-item {
  text-align: center;
  flex: 1;
}

.score-label {
  font-size: 0.6rem;
  letter-spacing: 0.25em;
  text-transform: uppercase;
  color: var(--text-dim);
  margin-bottom: 0.2rem;
}

.score-value {
  font-family: 'Playfair Display', serif;
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--gold);
  line-height: 1;
}

.score-divider {
  width: 1px;
  background: linear-gradient(to bottom, transparent, var(--gold-dim), transparent);
  margin: 0 0.5rem;
}

/* === RESPONSIVE CARD STAGE === */
.card-stage {
  perspective: 800px;
  margin: 0 auto 1.5rem;
  width: 40vw; 
  height: 56vw;
  max-width: 160px;
  max-height: 224px;
  position: relative;
}

.card-inner {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.card-inner.flip {
  animation: cardFlip 0.55s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes cardFlip {
  0%   { transform: rotateY(0deg) scale(1); }
  30%  { transform: rotateY(90deg) scale(1.05); }
  60%  { transform: rotateY(0deg) scale(1.02); }
  100% { transform: rotateY(0deg) scale(1); }
}

.card-face {
  width: 100%;
  height: 100%;
  border-radius: 12px;
  overflow: hidden;
  border: 2px solid rgba(201,168,76,0.3);
  box-shadow: 0 10px 40px rgba(0,0,0,0.6);
  position: relative;
  background: var(--card-bg);
}

.card-face img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}

/* Flash overlays */
.card-face::after {
  content: '';
  position: absolute;
  inset: 0;
  opacity: 0;
  pointer-events: none;
}
.card-face.flash-win::after { animation: flashWin 0.6s ease forwards; background: radial-gradient(circle, rgba(74,222,128,0.35) 0%, transparent 70%); }
.card-face.flash-loss::after { animation: flashLoss 0.6s ease forwards; background: radial-gradient(circle, rgba(248,113,113,0.4) 0%, transparent 70%); }

@keyframes flashWin { 0% { opacity: 0; } 40% { opacity: 1; } 100% { opacity: 0; } }
@keyframes flashLoss { 0% { opacity: 0; } 40% { opacity: 1; } 100% { opacity: 0; } }

/* === STATUS & BADGE === */
.status {
  text-align: center;
  font-size: 0.8rem;
  letter-spacing: 0.05em;
  color: var(--text-dim);
  margin-bottom: 1.2rem;
  min-height: 2.4em;
  display: flex;
  align-items: center;
  justify-content: center;
}

.result-badge {
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%) scale(0);
  background: var(--gold);
  color: #000;
  font-weight: 700;
  font-size: 0.7rem;
  letter-spacing: 0.1em;
  padding: 0.3rem 0.8rem;
  border-radius: 20px;
  z-index: 10;
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.result-badge.show { transform: translateX(-50%) scale(1); }

/* === BUTTONS === */
.buttons {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.8rem;
}

.btn {
  padding: 0.8rem 0.4rem;
  font-family: 'Josefin Sans', sans-serif;
  font-size: 0.8rem;
  font-weight: 600;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  border: 1px solid rgba(201,168,76,0.3);
  border-radius: 12px;
  cursor: pointer;
  background: linear-gradient(145deg, rgba(201,168,76,0.08), rgba(201,168,76,0.04));
  color: var(--gold);
  transition: all 0.2s;
}
.btn:hover:not(:disabled) { border-color: var(--gold); box-shadow: var(--glow-gold); }
.btn:active { transform: scale(0.96); }
.btn:disabled { opacity: 0.3; cursor: not-allowed; }

.btn-icon { display: block; font-size: 1.2rem; margin-bottom: 0.2rem; }

/* === STREAK DOTS === */
.streak-row {
  display: flex;
  justify-content: center;
  gap: 0.4rem;
  margin-top: 1rem;
}
.streak-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  border: 1px solid var(--gold-dim);
}
.streak-dot.filled {
  background: var(--gold);
  box-shadow: 0 0 8px var(--gold);
}

/* === MISC === */
.footer { text-align: center; margin-top: 1.5rem; }
.theme-btn {
  background: none; border: none; color: var(--text-dim);
  font-size: 0.7rem; cursor: pointer; text-transform: uppercase;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-5px); }
  40% { transform: translateX(5px); }
  60% { transform: translateX(-5px); }
  80% { transform: translateX(5px); }
}
.arena.shake { animation: shake 0.4s ease; }

/* Small Screen Adjustments */
@media (max-width: 360px) {
  .logo { font-size: 2.1rem; }
  .arena { padding: 1.2rem; }
  .score-value { font-size: 1.5rem; }
  .card-stage { width: 50vw; height: 70vw; }
}

/* Light Mode */
.light {
  --bg: #f5f0e8;
  --gold: #7a5c1e;
  --gold-dim: #b09060;
  --text: #1a1008;
  --text-dim: #6b5a3e;
  --card-bg: #fff;
}
.light body::before { background: radial-gradient(ellipse 80% 60% at 50% 50%, #ede8d8 0%, #f5f0e8 70%); }
.light .arena { background: linear-gradient(145deg, #fdfbf5 0%, #f5f0e2 100%); }

#particles { position: fixed; inset: 0; pointer-events: none; z-index: 50; }
.particle { position: absolute; border-radius: 50%; animation: pFly 0.8s ease-out forwards; }
@keyframes pFly { 0% { opacity: 1; transform: translate(0,0) scale(1); } 100% { opacity: 0; transform: translate(var(--tx), var(--ty)) scale(0); } }
</style>
</head>
<body>
<div id="particles"></div>

<div class="game-wrap">
  <div class="header">
    <div class="logo">HighRoller</div>
    <div class="tagline">Fate &bull; or &bull; Fold</div>
  </div>

  <div class="arena" id="arena">
    <div class="score-bar">
      <div class="score-item">
        <div class="score-label">Streak</div>
        <div class="score-value" id="score">0</div>
      </div>
      <div class="score-divider"></div>
      <div class="score-item">
        <div class="score-label">Best</div>
        <div class="score-value" id="highscore">0</div>
      </div>
    </div>

    <div class="card-stage" id="cardStage">
      <div class="result-badge" id="resultBadge">WIN</div>
      <div class="card-inner" id="cardInner">
        <div class="card-face" id="cardFace">
          <img id="cardImg" src="" alt="Card" />
        </div>
      </div>
    </div>

    <div class="status" id="status">Place your bet &mdash; higher or lower?</div>

    <div class="buttons">
      <button class="btn" id="btnHigher" onclick="guess('higher')">
        <span class="btn-icon">▲</span>Higher
      </button>
      <button class="btn" id="btnLower" onclick="guess('lower')">
        <span class="btn-icon">▼</span>Lower
      </button>
    </div>

    <div class="streak-row" id="streakRow"></div>
  </div>

  <div class="footer">
    <button class="theme-btn" onclick="toggleTheme()" id="themeBtn">☽ Toggle Light Mode</button>
  </div>
</div>

<script>
const API = "https://deckofcardsapi.com/api/deck/new/draw/?count=1";
const STREAK_MAX = 10;
let currentValue = null, score = 0, busy = false;
let highscore = parseInt(localStorage.getItem("highscore") || "0");

const valueMap = { "ACE":14,"KING":13,"QUEEN":12,"JACK":11 };
function cardValue(v) { return valueMap[v] || parseInt(v); }

const scoreEl = document.getElementById("score"), highEl = document.getElementById("highscore");
const statusEl = document.getElementById("status"), cardImg = document.getElementById("cardImg");
const cardFace = document.getElementById("cardFace"), cardInner = document.getElementById("cardInner");
const cardStage = document.getElementById("cardStage"), badge = document.getElementById("resultBadge");
const arena = document.getElementById("arena"), streakRow = document.getElementById("streakRow");

highEl.textContent = highscore;

function buildStreak() {
  streakRow.innerHTML = '';
  for(let i=0; i<STREAK_MAX; i++){
    const d = document.createElement('div');
    d.className = 'streak-dot' + (i < score ? ' filled' : '');
    streakRow.appendChild(d);
  }
}

async function drawCard() {
  try {
    const res = await fetch(API);
    const data = await res.json();
    const card = data.cards[0];
    cardImg.src = card.image;
    return cardValue(card.value);
  } catch (e) { return 7; }
}

async function startGame() {
  currentValue = await drawCard();
  buildStreak();
}

async function guess(type) {
  if(busy) return;
  busy = true;
  document.getElementById("btnHigher").disabled = true;
  document.getElementById("btnLower").disabled = true;

  const nextValue = await drawCard();
  cardInner.classList.add('flip');
  
  setTimeout(() => {
    cardInner.classList.remove('flip');
    const correct = (type === "higher" && nextValue > currentValue) || (type === "lower"  && nextValue < currentValue);
    const tie = nextValue === currentValue;

    if(tie) {
      showBadge("TIE", "tie");
      statusEl.textContent = "Dead heat — try again!";
    } else if(correct) {
      score++;
      showBadge("WIN ✦", "win");
      statusEl.textContent = "Nice call, High Roller.";
      cardFace.classList.add('flash-win');
      burst(true);
    } else {
      if(score > highscore) {
        highscore = score;
        localStorage.setItem("highscore", highscore);
        highEl.textContent = highscore;
      }
      showBadge("FOLD ✕", "lose");
      statusEl.textContent = score > 0 ? `A ${score}-card streak. Respect.` : "The deck doesn't forgive.";
      cardFace.classList.add('flash-loss');
      arena.classList.add('shake');
      burst(false);
      score = 0;
    }

    scoreEl.textContent = score;
    buildStreak();
    currentValue = nextValue;

    setTimeout(() => {
      badge.classList.remove('show');
      cardFace.classList.remove('flash-win', 'flash-loss');
      arena.classList.remove('shake');
      document.getElementById("btnHigher").disabled = false;
      document.getElementById("btnLower").disabled = false;
      busy = false;
    }, 1000);
  }, 300);
}

function showBadge(text, type) {
  badge.textContent = text;
  badge.className = 'result-badge show';
  if(type === 'win') badge.style.background = '#4ade80';
  else if(type === 'lose') badge.style.background = '#f87171';
  else badge.style.background = '#facc15';
}

function burst(win) {
  const p = document.getElementById("particles");
  const colors = win ? ['#c9a84c','#4ade80','#ffffff'] : ['#ef4444','#7f1d1d'];
  for(let i=0; i<15; i++){
    const el = document.createElement('div');
    el.className = 'particle';
    const angle = Math.random() * Math.PI * 2;
    const dist = 50 + Math.random() * 100;
    el.style.cssText = `
      width:6px;height:6px; background:${colors[i % colors.length]};
      left:50%; top:50%; --tx:${Math.cos(angle)*dist}px; --ty:${Math.sin(angle)*dist}px;
    `;
    p.appendChild(el);
    setTimeout(() => el.remove(), 800);
  }
}

function toggleTheme() {
  document.body.classList.toggle("light");
  const isLight = document.body.classList.contains("light");
  localStorage.setItem("theme", isLight ? "light" : "dark");
  document.getElementById("themeBtn").textContent = isLight ? "☽ Toggle Dark Mode" : "☽ Toggle Light Mode";
}

if(localStorage.getItem("theme") === "light") toggleTheme();
startGame();
</script>
</body>
</html>